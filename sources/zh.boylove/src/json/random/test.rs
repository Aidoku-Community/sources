#![expect(clippy::unwrap_used)]

use super::*;
use aidoku_test::aidoku_test;

#[aidoku_test]
fn random() {
	let manga_page_result: MangaPageResult = serde_json::from_str::<Root>(
		r#"{"data":[{"id":5766,"title":"kiss Kiss Baby","lanmu_id":null,"create_time":"2020-05-27 21:30:25","update_time":"2020-05-27 21:30:25","weekday":2,"open_time":"2021-08-20 15:02:14","sort":null,"status":1,"comment":1,"view":0,"image":"\/bookimages\/lubl_5546\/5546.webp","type":1,"auther":"东方同人","desc":"耽美漫画kissKissBaby\n耽美漫画kissKissBaby\n体验完整的「我的收藏」\n","mark":20,"mark_cnt":0,"ticai_id":null,"duzhequn_id":null,"diyu_id":null,"mhstatus":0,"tjswitch":0,"isfree":0,"cjid":"5546","cjstatus":1,"cjname":"lubl","mfolderName":null,"keyword":"待分类","last_chapter_title":" 第1话 ","searchnums":332,"last_chapter":"32769","isjingpin":0,"xianmian":0,"cover":"\/bookimages\/lubl_5546\/5546.webp","ishot":0,"issole":0,"isnew":0,"h":1,"vipcanread":0,"login_read":"N","unlock":"N","pingfen":"9.68","redirect_id":0,"movie_link":null,"cj_url":null,"image_count":0,"limitVip":"false","latest_two_chapters_vip":0,"app_only":0,"watchtimes":705,"dlsiteLink":null,"VpnLink":null,"member_only":0,"is_taiwan":0,"ticai":"其他"},{"id":7411,"title":"人间天堂","lanmu_id":null,"create_time":"2020-05-27 22:11:53","update_time":"2020-05-27 22:11:53","weekday":2,"open_time":"2021-08-20 15:02:14","sort":null,"status":1,"comment":1,"view":0,"image":"\/bookimages\/lubl_463\/463.webp","type":1,"auther":"西田东","desc":"短篇~上班族柚木和上司一起到外国出差，在海上他们的游艇突然坏了，面临囧境的他们终...\n短篇~上班族柚木和上司一起到外国出差，在海上他们的游艇突然坏了，面临囧境的他们终...\n体验完整的「我的收藏」\n","mark":7,"mark_cnt":0,"ticai_id":null,"duzhequn_id":null,"diyu_id":null,"mhstatus":0,"tjswitch":0,"isfree":0,"cjid":"463","cjstatus":1,"cjname":"lubl","mfolderName":null,"keyword":"待分类","last_chapter_title":" 第1话 ","searchnums":332,"last_chapter":"35844","isjingpin":0,"xianmian":0,"cover":"\/bookimages\/lubl_463\/463.webp","ishot":0,"issole":0,"isnew":0,"h":1,"vipcanread":0,"login_read":"N","unlock":"N","pingfen":"9.68","redirect_id":0,"movie_link":null,"cj_url":null,"image_count":0,"limitVip":"false","latest_two_chapters_vip":0,"app_only":0,"watchtimes":693,"dlsiteLink":null,"VpnLink":null,"member_only":0,"is_taiwan":0,"ticai":"其他"},{"id":13830,"title":"虐美人 外传B","lanmu_id":0,"create_time":"2021-12-31 03:43:21","update_time":"2025-03-01 12:22:09","weekday":5,"open_time":"2022-11-01 17:23:42","sort":"","status":1,"comment":1,"view":0,"image":"\/bookimages\/Uploads\/img\/20211231\/8b2aecf531bfbfd81495eb26a2a06848.webp","type":1,"auther":"우연희&이금산","desc":"《새디스틱 뷰티:외전》 虐美人 外传BL篇\r\n获知斗娜获奖的那天，看着被所有人祝贺的斗娜的背影，闵浩夹杂着嫉妒和挫败的微妙情绪，爬上学校的屋顶哭泣，而暗自跟踪着他的车宇景偷看到了这一幕，自那之后，他就不停幻想着能与车宇景的性爱。7年的等待，今天开始。","mark":69317,"mark_cnt":0,"ticai_id":0,"duzhequn_id":0,"diyu_id":0,"mhstatus":1,"tjswitch":0,"isfree":0,"cjid":"","cjstatus":0,"cjname":"","mfolderName":null,"keyword":"韩漫,外传,SM,囚禁,虐待,疯批攻,腹黑攻,高H,病娇,囚禁play,强暴,强制爱,年下攻,病娇攻,暴力倾向,圈养,血腥,巨乳,暴力攻,壮受,黑暗,虐,巨屌,尿道play,NTR,轮奸,剧情,监禁,虐心,疯批攻","last_chapter_title":null,"searchnums":325,"last_chapter":"","isjingpin":0,"xianmian":0,"cover":"\/bookimages\/Uploads\/img\/20211231\/8b2aecf531bfbfd81495eb26a2a06848.webp","ishot":0,"issole":0,"isnew":0,"h":1,"vipcanread":0,"login_read":"N","unlock":"N","pingfen":"9.68","redirect_id":0,"movie_link":"","cj_url":null,"image_count":0,"limitVip":"false","latest_two_chapters_vip":0,"app_only":0,"watchtimes":395672,"dlsiteLink":null,"VpnLink":null,"member_only":0,"is_taiwan":0,"ticai":"其他"},{"id":15443,"title":"保姆的情事","lanmu_id":0,"create_time":"2023-07-31 11:53:03","update_time":"2025-01-07 12:12:44","weekday":1,"open_time":"2025-01-07 14:42:01","sort":"","status":1,"comment":1,"view":0,"image":"\/bookimages\/img\/20230731\/6300952af66b604b8982112026950a33.webp","type":1,"auther":"강뿌콘","desc":"《가정부의 사정》\r\n平台:bomtoon\r\n料理？100分！打扫？100分！我新雇用的家政夫根本十项全能，令我非常满意。\r\n唯一的问题是，我总是把他置入到我正在翻译的成人小说，他就像是小说里的...","mark":21724,"mark_cnt":0,"ticai_id":0,"duzhequn_id":0,"diyu_id":0,"mhstatus":1,"tjswitch":0,"isfree":0,"cjid":"","cjstatus":0,"cjname":"","mfolderName":null,"keyword":"韩漫,高H,幻想,壮攻,女王受,多cp,壮受","last_chapter_title":"外传08 完","searchnums":305,"last_chapter":"","isjingpin":0,"xianmian":0,"cover":"","ishot":0,"issole":0,"isnew":0,"h":1,"vipcanread":0,"login_read":"N","unlock":"N","pingfen":"9.68","redirect_id":0,"movie_link":"","cj_url":null,"image_count":0,"limitVip":"false","latest_two_chapters_vip":0,"app_only":0,"watchtimes":193415,"dlsiteLink":null,"VpnLink":null,"member_only":0,"is_taiwan":0,"ticai":"其他"},{"id":19699,"title":"男人国的爱丽丝","lanmu_id":0,"create_time":"2023-06-27 11:23:10","update_time":"2025-03-14 11:47:10","weekday":4,"open_time":"2024-07-13 11:38:32","sort":"","status":1,"comment":1,"view":0,"image":"\/bookimages\/yandan_15167\/9e57f78cdc3a5f5.jpg","type":1,"auther":"香坂透","desc":"","mark":5349,"mark_cnt":0,"ticai_id":0,"duzhequn_id":0,"diyu_id":0,"mhstatus":0,"tjswitch":0,"isfree":0,"cjid":"15167","cjstatus":0,"cjname":"yandan","mfolderName":null,"keyword":"日漫","last_chapter_title":null,"searchnums":301,"last_chapter":"","isjingpin":0,"xianmian":0,"cover":"\/bookimages\/yandan_15167\/9e57f78cdc3a5f5.jpg","ishot":0,"issole":0,"isnew":0,"h":1,"vipcanread":0,"login_read":"N","unlock":"N","pingfen":"9.68","redirect_id":0,"movie_link":"","cj_url":"https:\/\/yandanshe.com\/15167\/","image_count":0,"limitVip":"false","latest_two_chapters_vip":0,"app_only":0,"watchtimes":71197,"dlsiteLink":"https:\/\/bit.ly\/3RLnh9T","VpnLink":"https:\/\/dlbooster.com\/","member_only":0,"is_taiwan":0,"ticai":"其他"},{"id":22297,"title":"黎明前夜","lanmu_id":0,"create_time":"2023-12-26 11:47:58","update_time":"2025-01-26 09:07:15","weekday":6,"open_time":"2025-01-21 15:37:10","sort":"","status":1,"comment":1,"view":0,"image":"\/bookimages\/img\/20231226\/99eeb9f221200b9c28457f07c9663d6d.webp","type":1,"auther":"방수인","desc":"<여명전야>\r\n平台：lezhin\r\n\r\n在香港最凶恶的地方九龙城菜经营药店的魏征。在组织的委托下，他一边制造毒品一边生活，“组织的区域”老板刘伟找到他，拜托他暂时保护可疑男子。不知道故乡在哪里、真实身份是什么、为什么来到这里，什么都不知道的男子汉赵燕。只剩下两人的情况下，魏征和赵燕将对彼此的好奇心培养成不同的感情，和魏征有着隐秘关系的刘伟不知怎么的向微妙的方向发展，两人之间产生了微妙的感情…\r\n\r\n更多精彩的BL漫请到boylove.cc","mark":4917,"mark_cnt":0,"ticai_id":0,"duzhequn_id":0,"diyu_id":0,"mhstatus":1,"tjswitch":0,"isfree":0,"cjid":"","cjstatus":0,"cjname":"","mfolderName":null,"keyword":"韩漫,黑社会,美人受,微虐,渣攻,美人攻","last_chapter_title":"","searchnums":287,"last_chapter":"","isjingpin":0,"xianmian":0,"cover":"","ishot":0,"issole":0,"isnew":0,"h":1,"vipcanread":0,"login_read":"N","unlock":"N","pingfen":"9.68","redirect_id":0,"movie_link":"","cj_url":null,"image_count":0,"limitVip":"false","latest_two_chapters_vip":0,"app_only":0,"watchtimes":111267,"dlsiteLink":null,"VpnLink":null,"member_only":0,"is_taiwan":0,"ticai":"其他"},{"id":26595,"title":"魔王大人总撩我","lanmu_id":0,"create_time":"2024-07-27 14:34:45","update_time":"2024-08-12 13:55:48","weekday":0,"open_time":"2024-07-27 14:31:02","sort":"","status":1,"comment":1,"view":0,"image":"\/bookimages\/baozi_mowangdarenzongliaowo-fanfandongman\/mowangdarenzongliaowo-fanfandongman","type":1,"auther":"","desc":"社恐大学生何免在第100次通关自己喜欢的游戏后，游戏裡的魔王加雷斯意外穿越到何免所在的现代。爲了摆脱加雷斯的恶作剧和纠缠，让他早日回到游戏中，何免带着加雷斯一起收集随加雷斯穿越而四散在现代世界的游戏元素，两人在不知不觉帮助了对方成长，产生了感情与羁绊。","mark":3043,"mark_cnt":0,"ticai_id":0,"duzhequn_id":0,"diyu_id":0,"mhstatus":0,"tjswitch":0,"isfree":0,"cjid":"mowangdarenzongliaowo-fanfandongman","cjstatus":0,"cjname":"baozi","mfolderName":null,"keyword":"连载中,国漫,穿越","last_chapter_title":"番外： 可喜可贺，新年快乐！","searchnums":279,"last_chapter":"","isjingpin":0,"xianmian":0,"cover":"\/bookimages\/baozi_mowangdarenzongliaowo-fanfandongman\/mowangdarenzongliaowo-fanfandongman","ishot":0,"issole":0,"isnew":0,"h":1,"vipcanread":0,"login_read":"N","unlock":"N","pingfen":"9.68","redirect_id":0,"movie_link":"","cj_url":"https:\/\/www.baozimh.com\/comic\/mowangdarenzongliaowo-fanfandongman","image_count":0,"limitVip":"false","latest_two_chapters_vip":0,"app_only":0,"watchtimes":18583,"dlsiteLink":null,"VpnLink":null,"member_only":0,"is_taiwan":0,"ticai":"其他"},{"id":26787,"title":"灵魂缓刑","lanmu_id":0,"create_time":"2024-07-30 15:36:13","update_time":"2024-07-31 04:25:51","weekday":2,"open_time":"2024-07-30 14:59:33","sort":"","status":1,"comment":1,"view":0,"image":"\/bookimages\/baozi_linghunhuanxing-ertuanshushengyuanzhuyuandiangezimanhua\/linghunhuanxing-ertuanshushengyuanzhuyuandiangezimanhua","type":1,"auther":"","desc":"感情白痴天才杀手x卧薪尝胆腹黑植物人你是一个植物人，在牀上已经躺了六年。直到第七年时，你的主治医生开始和你对话。他和你分享他的杀手行迹。你也许是因神经被刺激，竟奇蹟般地醒来了。肌肉萎缩的你无法下牀，语言系统也面临崩溃——你将如何逃生？","mark":372,"mark_cnt":0,"ticai_id":0,"duzhequn_id":0,"diyu_id":0,"mhstatus":0,"tjswitch":0,"isfree":0,"cjid":"linghunhuanxing-ertuanshushengyuanzhuyuandiangezimanhua","cjstatus":0,"cjname":"baozi","mfolderName":null,"keyword":"连载中,国漫,剧情,都市,悬疑,纯爱","last_chapter_title":"完结篇 帮我治病吧，医生","searchnums":279,"last_chapter":"","isjingpin":0,"xianmian":0,"cover":"\/bookimages\/baozi_linghunhuanxing-ertuanshushengyuanzhuyuandiangezimanhua\/linghunhuanxing-ertuanshushengyuanzhuyuandiangezimanhua","ishot":0,"issole":0,"isnew":0,"h":1,"vipcanread":0,"login_read":"N","unlock":"N","pingfen":"9.68","redirect_id":0,"movie_link":"","cj_url":"https:\/\/www.baozimh.com\/comic\/linghunhuanxing-ertuanshushengyuanzhuyuandiangezimanhua","image_count":0,"limitVip":"false","latest_two_chapters_vip":0,"app_only":0,"watchtimes":5741,"dlsiteLink":null,"VpnLink":null,"member_only":0,"is_taiwan":0,"ticai":"其他"},{"id":28990,"title":"祭司被信仰神明肆意宠爱的深夜情事","lanmu_id":0,"create_time":"2024-10-17 12:07:26","update_time":"2024-10-17 12:07:26","weekday":3,"open_time":null,"sort":"","status":1,"comment":1,"view":0,"image":"\/bookimages\/img\/20241017\/ea5c7aa999edbf29d69230b29201951f.webp","type":1,"auther":" 渊たこた","desc":"[桃紫の汉化 & 祈岱] [@13(渊たこた)]祭司が信仰対象から宠爱を受ける话 [中国翻訳] [无修正] [DL版]","mark":10489,"mark_cnt":0,"ticai_id":0,"duzhequn_id":0,"diyu_id":0,"mhstatus":1,"tjswitch":0,"isfree":0,"cjid":"","cjstatus":0,"cjname":"","mfolderName":null,"keyword":"日漫","last_chapter_title":"全壹话","searchnums":133,"last_chapter":"","isjingpin":0,"xianmian":0,"cover":"","ishot":0,"issole":0,"isnew":0,"h":1,"vipcanread":0,"login_read":"N","unlock":"N","pingfen":"9.68","redirect_id":0,"movie_link":"","cj_url":null,"image_count":0,"limitVip":"false","latest_two_chapters_vip":0,"app_only":0,"watchtimes":164338,"dlsiteLink":null,"VpnLink":null,"member_only":0,"is_taiwan":0,"ticai":"其他"},{"id":30631,"title":"White Flag","lanmu_id":0,"create_time":"2025-01-08 11:42:41","update_time":"2025-01-08 11:50:22","weekday":2,"open_time":null,"sort":"","status":1,"comment":1,"view":0,"image":"\/bookimages\/img\/20250108\/11ee65eed2b16cef8636179c3a4bebf3.webp","type":1,"auther":"TIM","desc":"(Senka Haru Taisai Higasi 2019)[Still(TIM)] White Flag (Touken Ranbu)[Chinese][丁丁炸裂汉化组]\r\n(闪华春大祭 东2019)[Still (TIM)] ホワイトフラグ (刀剣乱舞)[中国翻訳]","mark":1395,"mark_cnt":0,"ticai_id":0,"duzhequn_id":0,"diyu_id":0,"mhstatus":1,"tjswitch":0,"isfree":0,"cjid":"","cjstatus":0,"cjname":"","mfolderName":null,"keyword":"日漫","last_chapter_title":"","searchnums":55,"last_chapter":"","isjingpin":0,"xianmian":0,"cover":"","ishot":0,"issole":0,"isnew":0,"h":1,"vipcanread":0,"login_read":"N","unlock":"N","pingfen":"9.68","redirect_id":0,"movie_link":"","cj_url":null,"image_count":0,"limitVip":"false","latest_two_chapters_vip":0,"app_only":0,"watchtimes":23251,"dlsiteLink":null,"VpnLink":null,"member_only":0,"is_taiwan":0,"ticai":"其他"}],"code":200,"total":10}"#,
	)
	.unwrap()
	.into();

	assert!(manga_page_result.has_next_page);

	let entries = manga_page_result.entries;
	assert_eq!(entries.len(), 10);
	assert_eq!(
		*entries.last().unwrap(),
		Manga {
			key: "30631".into(),
			title: "White Flag".into(),
			cover: Some(
				"https://boylove.cc/bookimages/img/20250108/11ee65eed2b16cef8636179c3a4bebf3.webp"
					.into()
			),
			authors: Some(["TIM".into()].into()),
			description: Some("(Senka Haru Taisai Higasi 2019)[Still(TIM)] White Flag (Touken Ranbu)[Chinese][丁丁炸裂汉化组]  \n(闪华春大祭 东2019)[Still (TIM)] ホワイトフラグ (刀剣乱舞)[中国翻訳]".into()),
			url: Some("https://boylove.cc/home/book/index/id/30631".into()),
			tags: Some(["日漫".into()].into()),
			status: MangaStatus::Completed,
			content_rating: ContentRating::NSFW,
			..Default::default()
		}
	);
}
